# Описание задания

На почтовый ящик компании "ООО "Запчасти даром" приходит прайс-лист от поставщика "ООО "Доставим в срок"
Прайс-лист представляет из себя csv файл, образец которого во вложении. В прайсе содержится информация об автозапчастях, которые доставляет поставщик.
Необходимо написать консольное или web приложение, которое скачивает прайс с почтового ящика и загружает в базу.

Входные данные.

Необходимо загрузить в таблицу PriceItems БД (любую реляционную) со структурой
- Vendor varchar(64) - производитель
- Number varchar(64) - номер запчасти
- SearchVendor varchar(64) - производитель для поиска
- SearchNumber varchar(64) - номер для поиска
- Description varchar(512) - наименование
- Price decimal(18,2) - цена
- Count int - количество

Данные из прайс листа, но только определенные колонки.
Нужные колонки из файла:
- "Бренд" загрузить в Vendor
- "Каталожный номер" загрузить в Number
- "Описание" загрузить в Description
- "Цена" в Price
- "Наличие" в Count

При выполнении задания следует учесть:
- компании "ООО "Запчасти даром" присылают прайсы несколько поставщиков, поэтому порядок колонок и их наименование
в прайсе может меняться, поэтому сопоставление колонок нужно конфигурировать в зависимости от поставщика. В данном случае
достаточно одной конфигурации под поставщика "ООО "Доставим в срок"
- почтовый ящик так же должен конфигурироваться (использовать протокол IMAP для получения письма).
Прайс-лист будет вложением к письму, при чем имя файла не регламентировано, известно только, что расширение .csv
- при загрузке в базу следует заполнить поля SearchVendor и SearchNumber путем удаления из них всех нецифернобуквенных символов
и преобразования к верхнему регистру символов полей Vendor и Number соответственно
- колонка с количеством может содержать в себе записи вида >10, <13, 10-50. В первом случае нужно загрузить просто 10 и 13, во втором 50
- колонка "Описание" может содержать более 512 символов, в таком случае необходимо ее обрезать до 512

## Пояснения к решению:

1. Можно ввести свою конфигурацию почтового клиента и таблицы поставщика. По умолчанию я ввёл данные, на которых тестировал: **yandex почта**, на которую отправил вашу таблицу от имени **"Hello World"**.
Данные тестовой почты:
   > login: test17012022  
   > password: RusRob123
2. Я не смог разобраться с 16300 строкой в файле, вы её специально сломали? Программа заканчивается, когда сталкивается с ней, но до 16300 все строки загружает в БД.
3. Пользовался **SQLite** и **JDBC**.

## Обратная связь:

**Плюсы**:
- Присутствует пояснение к решению
- Код для получения данных из почты и работой с БД вынесены в отдельные классы
- Используется готовая библиотека для парсинга CSV
- Используются регулярные выражения для удаления нецифробуквенных символов
- Хорошо реализован класс MailClient  
   
**Минусы**:
- Конфигурацию всё же лучше делать в файле, чем запрашивать каждый раз у пользователя
- Конфигурация подключения к БД и путь к скачиванию вложений с почты зашиты в код, так же лучше в файле конфигурационном хранить.
- Классы MailClient и Repository объявлены как record
- Класс Repository не отражает своей сути, это не репозиторий, а просто код для взаимодействия с БД
- Код парсинга CSV содержится в классе доступа к данным, это нарушает принцип единственной ответственности.
Разные задачи лучше выносить в отдельные классы, их потом будет проще поддерживать.
- В блоке catch при загрузке в БД отсутствует откат транзакции. Тут лучше откатывать транзакцию, а не очищать таблицу при каждом запуске.
По условию, могут добавиться новые поставщики, т.е. в таблице могут уже присутствовать данные, которые не стоит удалять.
- количество считается неправильно, например 10-50 загрузится значение 1050, а не 50, как по заданию.

Рекомендации:
- Разобраться для чего нужны record и в каких случаях их нужно использовать
- Разобраться, что такое паттерн "Репозиторий" и как он реализуется
- Разобраться, что такое принципы SOLID и для чего они нужны.
